{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nvar _jsxFileName = \"/home/lautaro/personal/contadordevoleyreactnative/screens/Match.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { Text, Button, IconButton, Colors, Modal, Portal } from 'react-native-paper';\nimport { widthPercentageToDP as wp, heightPercentageToDP as hp } from 'react-native-responsive-screen';\nimport MatchSummaryModal from \"./../components/MatchSummaryModal\";\n\nvar MatchEngine = function () {\n  function MatchEngine(matchJson) {\n    _classCallCheck(this, MatchEngine);\n\n    this.teams = matchJson.teams;\n    this.teams.team_one.sets = matchJson.teams.team_one.sets ? matchJson.teams.team_one.sets : 0;\n    this.teams.team_two.sets = matchJson.teams.team_two.sets ? matchJson.teams.team_two.sets : 0;\n    this.sets_number = matchJson.sets_number ? matchJson.sets_number : this.constructor.DEFAULT_SETS_NUMBER;\n    this.set_points_number = matchJson.set_points_number ? matchJson.set_points_number : this.constructor.DEFAULT_SET_POINTS_NUMBER;\n    this.points_difference = matchJson.points_difference ? matchJson.points_difference : this.constructor.DEFAULT_POINTS_DIFFERENCE;\n    this.tie_break_points = matchJson.tie_break_points ? matchJson.tie_break_points : this.constructor.DEFAULT_TIE_BREAK_POINTS;\n    this.status = matchJson.status ? matchJson.status : this.constructor.PLAYING_STATUS;\n    this.sets = [this.constructor.generateSet()];\n    this.winner = matchJson.winner ? matchJson.winner : null;\n  }\n\n  _createClass(MatchEngine, [{\n    key: \"json\",\n    value: function json() {\n      return {\n        'teams': this.teams,\n        'sets_number': this.sets_number,\n        'set_points_number': this.set_points_number,\n        'points_difference': this.points_difference,\n        'tie_break_points': this.tie_break_points,\n        'status': this.status,\n        'sets': this.sets,\n        'winner': this.winner\n      };\n    }\n  }, {\n    key: \"addPointTeam\",\n    value: function addPointTeam(team) {\n      if (this.status === this.constructor.FINISHED_STATUS) {\n        return false;\n      }\n\n      var team_points = team === 1 ? 'team_one' : 'team_two';\n      var other_team_points = team !== 1 ? 'team_one' : 'team_two';\n      var index = this.sets.length - 1;\n      this.sets[index][team_points] = this.sets[index][team_points] + 1;\n\n      if (this.sets[index][team_points] >= this.sets[index][other_team_points] + this.points_difference && this.sets[index][team_points] >= this.set_points_number || this.sets.length === this.sets_number && this.sets[index][team_points] >= this.sets[index][other_team_points] + this.points_difference && this.sets[index][team_points] >= this.tie_break_points) {\n        this.teams[team_points].sets = this.teams[team_points].sets + 1;\n        this.sets[index].winner = team_points;\n\n        if (this.teams[team_points].sets >= Math.ceil(this.sets_number / 2)) {\n          this.status = this.constructor.FINISHED_STATUS;\n          this.winner = team_points;\n        } else {\n          this.sets.push(this.constructor.generateSet());\n        }\n      }\n    }\n  }, {\n    key: \"substractPointTeam\",\n    value: function substractPointTeam(team) {\n      if (this.status === this.constructor.FINISHED_STATUS) {\n        return false;\n      }\n\n      var index = this.sets.length - 1;\n      var team_points = team === 1 ? 'team_one' : 'team_two';\n\n      if (this.sets[index][team_points] === 0) {\n        if (this.sets.length === 1) {\n          return false;\n        }\n\n        this.sets.pop();\n\n        var _index = this.sets.length - 1;\n\n        this.teams[this.sets[_index].winner].sets = this.teams[this.sets[_index].winner].sets - 1;\n        this.sets[_index][this.sets[_index].winner] = this.sets[_index][this.sets[_index].winner] - 1;\n        this.sets[_index].winner = null;\n      } else {\n        this.sets[index][team_points] = this.sets[index][team_points] - 1;\n      }\n    }\n  }], [{\n    key: \"generateSet\",\n    value: function generateSet() {\n      return {\n        'team_one': 0,\n        'team_two': 0,\n        'winner': null\n      };\n    }\n  }]);\n\n  return MatchEngine;\n}();\n\nMatchEngine.PLAYING_STATUS = 'PLAYING';\nMatchEngine.FINISHED_STATUS = 'FINISHED';\nMatchEngine.DEFAULT_SETS_NUMBER = 5;\nMatchEngine.DEFAULT_SET_POINTS_NUMBER = 25;\nMatchEngine.DEFAULT_POINTS_DIFFERENCE = 2;\nMatchEngine.DEFAULT_TIE_BREAK_POINTS = 15;\nMatchEngine.TEAM_ONE = 'team_one';\nMatchEngine.TEAM_TWO = 'team_two';\nvar styles = StyleSheet.create({\n  container: {\n    flex: 0,\n    flexDirection: 'row'\n  },\n  item: {\n    width: wp('45%'),\n    marginTop: hp('1%'),\n    marginLeft: hp('1%'),\n    marginRight: hp('1%')\n  },\n  teamNames: {\n    fontSize: wp('5%'),\n    marginBottom: hp('2%')\n  },\n  teamCountersContainer: {\n    borderWidth: 1,\n    borderRadius: 15,\n    width: '100%',\n    height: hp('20%'),\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  circle: {\n    marginLeft: wp('1%'),\n    width: wp('7%'),\n    height: wp('7%'),\n    borderWidth: 1,\n    borderRadius: 100,\n    marginBottom: hp('1%')\n  }\n});\n\nvar Match = function (_Component) {\n  _inherits(Match, _Component);\n\n  var _super = _createSuper(Match);\n\n  function Match() {\n    var _this;\n\n    _classCallCheck(this, Match);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      'disabled_buttons': false,\n      'loading': false,\n      'id': null,\n      'sets_number': 3,\n      'status': null,\n      'set_points_number': null,\n      'points_difference': null,\n      'tie_break_points': null,\n      'sets': [],\n      'teams': {\n        'team_one': {\n          'name': '',\n          'color': ''\n        },\n        'team_two': {\n          'name': '',\n          'color': ''\n        }\n      },\n      'winner': null,\n      'dismissModal': false\n    };\n    return _this;\n  }\n\n  _createClass(Match, [{\n    key: \"substractPointTeam\",\n    value: function substractPointTeam(team) {\n      this.match.substractPointTeam(team);\n      this.setState(this.match.json());\n    }\n  }, {\n    key: \"addPointTeam\",\n    value: function addPointTeam(team) {\n      this.match.addPointTeam(team);\n      this.setState(this.match.json());\n    }\n  }, {\n    key: \"getRenderedSets\",\n    value: function getRenderedSets(team) {\n      var renderedWon = this.state.teams[team].sets;\n      var renderedWonCount = 0;\n      var render = [];\n\n      for (var i = 0; i < Math.floor(this.state.sets_number / 2 + 1); i++) {\n        if (renderedWonCount < renderedWon) {\n          render.push(React.createElement(View, {\n            style: _objectSpread(_objectSpread({}, styles.circle), {}, {\n              backgroundColor: 'white'\n            }),\n            key: team + \"-\" + i,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 19\n            }\n          }));\n        } else {\n          render.push(React.createElement(View, {\n            style: _objectSpread(_objectSpread({}, styles.circle), {}, {\n              borderColor: 'white'\n            }),\n            key: team + \"-\" + i,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 19\n            }\n          }));\n        }\n\n        renderedWonCount += 1;\n      }\n\n      return render;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var jsonMatch = {\n        'disabled_buttons': false,\n        'loading': false,\n        'id': null,\n        'sets_number': this.props.route.params.sets,\n        'status': null,\n        'set_points_number': 25,\n        'points_difference': 2,\n        'tie_break_points': 15,\n        'sets': [],\n        'teams': {\n          'team_one': {\n            'name': this.props.route.params.team_one_name,\n            'color': this.props.route.params.team_one_color\n          },\n          'team_two': {\n            'name': this.props.route.params.team_two_name,\n            'color': this.props.route.params.team_two_color\n          }\n        },\n        'winner': null,\n        'dismissModal': false\n      };\n      this.match = new MatchEngine(jsonMatch);\n      this.setState(this.match.json());\n    }\n  }, {\n    key: \"getCurrentSet\",\n    value: function getCurrentSet() {\n      return this.state.sets[this.state.sets.length - 1];\n    }\n  }, {\n    key: \"dismissModal\",\n    value: function dismissModal() {\n      this.setState({\n        dismissModal: true\n      });\n      this.props.navigation.navigate('Home');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 7\n        }\n      }, React.createElement(Portal, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 9\n        }\n      }, this.state.winner != null ? React.createElement(MatchSummaryModal, {\n        visible: !this.state.dismissModal,\n        match: this.state,\n        onDismiss: function onDismiss() {\n          _this2.dismissModal();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 38\n        }\n      }) : null), React.createElement(View, {\n        style: styles.container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: styles.item,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 11\n        }\n      }, React.createElement(Text, {\n        style: styles.teamNames,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 13\n        }\n      }, this.state.teams.team_one.name), React.createElement(View, {\n        style: styles.container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 13\n        }\n      }, this.getRenderedSets('team_one')), React.createElement(View, {\n        style: _objectSpread(_objectSpread({}, styles.teamCountersContainer), {}, {\n          backgroundColor: this.state.teams.team_one.color,\n          borderColor: this.state.teams.team_one.color\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: wp('20%'),\n          color: 'white'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 15\n        }\n      }, this.getCurrentSet() !== undefined ? this.getCurrentSet().team_one : 0)), React.createElement(View, {\n        style: _objectSpread(_objectSpread({}, styles.container), {}, {\n          marginLeft: 'auto',\n          marginRight: 'auto'\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 13\n        }\n      }, React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 15\n        }\n      }, React.createElement(IconButton, {\n        icon: \"minus\",\n        color: Colors.red500,\n        size: wp('10%'),\n        onPress: function onPress() {\n          return _this2.substractPointTeam(1);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 17\n        }\n      })), React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 15\n        }\n      }, React.createElement(IconButton, {\n        icon: \"plus\",\n        color: Colors.red500,\n        size: wp('10%'),\n        onPress: function onPress() {\n          return _this2.addPointTeam(1);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 17\n        }\n      })))), React.createElement(View, {\n        style: styles.item,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 11\n        }\n      }, React.createElement(Text, {\n        style: styles.teamNames,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 13\n        }\n      }, this.state.teams.team_two.name), React.createElement(View, {\n        style: styles.container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 13\n        }\n      }, this.getRenderedSets('team_two')), React.createElement(View, {\n        style: _objectSpread(_objectSpread({}, styles.teamCountersContainer), {}, {\n          backgroundColor: this.state.teams.team_two.color,\n          borderColor: this.state.teams.team_two.color\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: wp('20%'),\n          color: 'white'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 15\n        }\n      }, this.getCurrentSet() !== undefined ? this.getCurrentSet().team_two : 0)), React.createElement(View, {\n        style: _objectSpread(_objectSpread({}, styles.container), {}, {\n          marginLeft: 'auto',\n          marginRight: 'auto'\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 13\n        }\n      }, React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 15\n        }\n      }, React.createElement(IconButton, {\n        icon: \"minus\",\n        color: Colors.red500,\n        size: wp('10%'),\n        onPress: function onPress() {\n          return _this2.substractPointTeam(2);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 17\n        }\n      })), React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 15\n        }\n      }, React.createElement(IconButton, {\n        icon: \"plus\",\n        color: Colors.red500,\n        size: wp('10%'),\n        onPress: function onPress() {\n          return _this2.addPointTeam(2);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 17\n        }\n      }))))));\n    }\n  }]);\n\n  return Match;\n}(Component);\n\nexport default Match;","map":{"version":3,"sources":["/home/lautaro/personal/contadordevoleyreactnative/screens/Match.js"],"names":["React","Component","Text","Button","IconButton","Colors","Modal","Portal","widthPercentageToDP","wp","heightPercentageToDP","hp","MatchSummaryModal","MatchEngine","matchJson","teams","team_one","sets","team_two","sets_number","constructor","DEFAULT_SETS_NUMBER","set_points_number","DEFAULT_SET_POINTS_NUMBER","points_difference","DEFAULT_POINTS_DIFFERENCE","tie_break_points","DEFAULT_TIE_BREAK_POINTS","status","PLAYING_STATUS","generateSet","winner","team","FINISHED_STATUS","team_points","other_team_points","index","length","Math","ceil","push","pop","TEAM_ONE","TEAM_TWO","styles","StyleSheet","create","container","flex","flexDirection","item","width","marginTop","marginLeft","marginRight","teamNames","fontSize","marginBottom","teamCountersContainer","borderWidth","borderRadius","height","alignItems","justifyContent","circle","Match","state","match","substractPointTeam","setState","json","addPointTeam","renderedWon","renderedWonCount","render","i","floor","backgroundColor","borderColor","jsonMatch","props","route","params","team_one_name","team_one_color","team_two_name","team_two_color","dismissModal","navigation","navigate","name","getRenderedSets","color","getCurrentSet","undefined","red500"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport { StyleSheet, Image, View } from 'react-native';\n\nimport { Text, Button, IconButton, Colors, Modal, Portal } from 'react-native-paper';\n\nimport {widthPercentageToDP as wp, heightPercentageToDP as hp} from 'react-native-responsive-screen';\n\nimport MatchSummaryModal from './../components/MatchSummaryModal';\n\nclass MatchEngine {\n\n    static PLAYING_STATUS = 'PLAYING';\n    static FINISHED_STATUS = 'FINISHED';\n    static DEFAULT_SETS_NUMBER = 5;\n    static DEFAULT_SET_POINTS_NUMBER = 25;\n    static DEFAULT_POINTS_DIFFERENCE = 2;\n    static DEFAULT_TIE_BREAK_POINTS = 15;\n    static TEAM_ONE = 'team_one';\n    static TEAM_TWO = 'team_two';\n\n    constructor (matchJson) {\n        this.teams = matchJson.teams;\n        this.teams.team_one.sets = matchJson.teams.team_one.sets ? matchJson.teams.team_one.sets : 0;\n        this.teams.team_two.sets = matchJson.teams.team_two.sets ? matchJson.teams.team_two.sets : 0;\n        this.sets_number = matchJson.sets_number ? matchJson.sets_number : this.constructor.DEFAULT_SETS_NUMBER;\n        this.set_points_number = matchJson.set_points_number ? matchJson.set_points_number : this.constructor.DEFAULT_SET_POINTS_NUMBER;\n        this.points_difference = matchJson.points_difference ? matchJson.points_difference : this.constructor.DEFAULT_POINTS_DIFFERENCE;\n        this.tie_break_points = matchJson.tie_break_points ? matchJson.tie_break_points : this.constructor.DEFAULT_TIE_BREAK_POINTS;\n        this.status = matchJson.status ? matchJson.status : this.constructor.PLAYING_STATUS;\n        this.sets = [this.constructor.generateSet()];\n        this.winner = matchJson.winner ? matchJson.winner : null;\n    }\n\n    static generateSet () {\n        return {\n            'team_one': 0,\n            'team_two': 0,\n            'winner': null,\n        }\n    }\n\n    json () {\n        return {\n            'teams': this.teams,\n            'sets_number': this.sets_number,\n            'set_points_number': this.set_points_number,\n            'points_difference': this.points_difference,\n            'tie_break_points': this.tie_break_points,\n            'status': this.status,\n            'sets': this.sets,\n            'winner': this.winner\n        }\n    }\n\n    addPointTeam (team) {\n        if (this.status === this.constructor.FINISHED_STATUS) {\n            return false;\n        }\n        let team_points = team === 1 ? 'team_one' : 'team_two';\n        let other_team_points = team !== 1 ? 'team_one' : 'team_two';\n        let index = this.sets.length - 1;\n        this.sets[index][team_points] = this.sets[index][team_points] + 1;\n        if (\n            this.sets[index][team_points] >= (this.sets[index][other_team_points] + this.points_difference ) &&\n            this.sets[index][team_points] >= this.set_points_number || \n            this.sets.length === (this.sets_number) && this.sets[index][team_points] >= (this.sets[index][other_team_points] + this.points_difference ) &&\n            this.sets[index][team_points] >= this.tie_break_points\n        ) {\n            // The set finished?\n\n            this.teams[team_points].sets = this.teams[team_points].sets + 1; // Register that the team win a set\n            this.sets[index].winner = team_points; // Register that this set was winned by the team\n\n            if (\n                this.teams[team_points].sets >= Math.ceil(this.sets_number / 2)\n            ){\n                // The match finished?\n                this.status = this.constructor.FINISHED_STATUS;\n                this.winner = team_points;\n            } else {\n                // Create new set\n                this.sets.push(this.constructor.generateSet());\n            }\n        }\n    }\n\n    substractPointTeam (team) {\n        if (this.status === this.constructor.FINISHED_STATUS) {\n            return false;\n        }\n        let index = this.sets.length - 1;\n        let team_points = team === 1 ? 'team_one' : 'team_two';\n        if (this.sets[index][team_points] === 0){\n            if (this.sets.length === 1){\n                return false;\n            }\n            this.sets.pop();\n            let index = this.sets.length - 1;\n            this.teams[this.sets[index].winner].sets = this.teams[this.sets[index].winner].sets - 1;\n            this.sets[index][this.sets[index].winner] = this.sets[index][this.sets[index].winner] - 1;\n            this.sets[index].winner = null;\n        } else {\n            this.sets[index][team_points] = this.sets[index][team_points] - 1;\n        }\n    }\n\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 0,\n    flexDirection: 'row',\n  },\n  item: {\n    width: wp('45%'),\n    marginTop: hp('1%'),\n    marginLeft: hp('1%'),\n    marginRight: hp('1%'),\n  },\n  teamNames: {\n    fontSize: wp('5%'),\n    marginBottom: hp('2%'),\n  },\n  teamCountersContainer: {\n    borderWidth: 1,\n    borderRadius: 15,\n    width: '100%',\n    height: hp('20%'),\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  circle: {\n    marginLeft: wp('1%'),\n    width: wp('7%'),\n    height: wp('7%'),\n    borderWidth: 1,\n    borderRadius: 100,\n    marginBottom: hp('1%')\n  },\n});\n\nclass Match extends Component {\n\n  state = {\n      'disabled_buttons': false,\n      'loading': false,\n      'id': null,\n      'sets_number': 3,\n      'status': null,\n      'set_points_number': null,\n      'points_difference': null,\n      'tie_break_points': null,\n      'sets': [],\n      'teams': {\n          'team_one': {\n              'name': '',\n              'color': '',\n          },\n          'team_two': {\n              'name': '',\n              'color': '',\n          }\n      },\n      'winner': null,\n      'dismissModal': false,\n    }\n\n  substractPointTeam(team) {\n      this.match.substractPointTeam(team);\n      this.setState(this.match.json());\n  }\n\n  addPointTeam(team) {\n      this.match.addPointTeam(team);\n      this.setState(this.match.json());\n  }\n\n  getRenderedSets (team) {\n      let renderedWon = this.state.teams[team].sets;\n      let renderedWonCount = 0;\n\n      let render = [];\n      for (let i = 0; i < Math.floor(((this.state.sets_number / 2) + 1)); i++) {\n          if (renderedWonCount < renderedWon) {\n              render.push(\n                  <View style={{...styles.circle, backgroundColor: 'white'}} key={`${team}-${i}`}></View>\n              );\n          } else {\n              render.push(\n                  <View style={{...styles.circle, borderColor: 'white'}} key={`${team}-${i}`}></View>\n              );\n          }\n          renderedWonCount += 1;\n      }\n      return render;\n  }\n\n  componentDidMount () {\n      let jsonMatch = {\n        'disabled_buttons': false,\n        'loading': false,\n        'id': null,\n        'sets_number': this.props.route.params.sets,\n        'status': null,\n        'set_points_number': 25,\n        'points_difference': 2,\n        'tie_break_points': 15,\n        'sets': [],\n        'teams': {\n            'team_one': {\n                'name': this.props.route.params.team_one_name,\n                'color': this.props.route.params.team_one_color,\n            },\n            'team_two': {\n                'name': this.props.route.params.team_two_name,\n                'color': this.props.route.params.team_two_color,\n            }\n        },\n        'winner': null,\n        'dismissModal': false,\n      }\n      this.match = new MatchEngine(jsonMatch);\n      this.setState(this.match.json())\n  }\n\n  getCurrentSet() {\n      return this.state.sets[this.state.sets.length - 1];\n  }\n\n  dismissModal() {\n      this.setState({dismissModal: true})\n      this.props.navigation.navigate('Home');\n  }\n\n  render () {\n    return (\n      <View>\n        <Portal>\n        {this.state.winner != null ? <MatchSummaryModal visible={!this.state.dismissModal} match={this.state} onDismiss={() => {this.dismissModal()}} /> : null}\n        </Portal>\n        <View style={styles.container}>\n          <View style={styles.item}>\n            <Text style={styles.teamNames} >{this.state.teams.team_one.name}</Text>\n            <View style={styles.container} >\n              {this.getRenderedSets('team_one')}\n            </View>\n            <View style={{...styles.teamCountersContainer, backgroundColor: this.state.teams.team_one.color, borderColor: this.state.teams.team_one.color}}>\n              <Text style={{fontSize: wp('20%'), color: 'white'}} >{this.getCurrentSet() !== undefined ? this.getCurrentSet().team_one : 0}</Text>\n            </View>\n\n            <View style={{...styles.container, marginLeft: 'auto', marginRight: 'auto'}}>\n              <View>\n                <IconButton\n                  icon=\"minus\"\n                  color= {Colors.red500}\n                  size={wp('10%')}\n                  onPress={() => this.substractPointTeam(1)}\n                />\n              </View>\n              <View>\n                <IconButton\n                    icon=\"plus\"\n                    color= {Colors.red500}\n                    size={wp('10%')}\n                    onPress={() => this.addPointTeam(1)}\n                  />\n                </View>\n              </View>\n          </View>\n          <View style={styles.item}>\n            <Text style={styles.teamNames}>{this.state.teams.team_two.name}</Text>\n            <View style={styles.container} >\n              {this.getRenderedSets('team_two')}\n            </View>\n            <View style={{...styles.teamCountersContainer, backgroundColor: this.state.teams.team_two.color, borderColor: this.state.teams.team_two.color}}>\n              <Text style={{fontSize: wp('20%'), color: 'white'}} >{this.getCurrentSet() !== undefined ? this.getCurrentSet().team_two : 0}</Text>\n            </View>\n            <View style={{...styles.container, marginLeft: 'auto', marginRight: 'auto'}}>\n              <View>\n                <IconButton\n                  icon=\"minus\"\n                  color= {Colors.red500}\n                  size={wp('10%')}\n                  onPress={() => this.substractPointTeam(2)}\n                />\n              </View>\n              <View>\n                <IconButton\n                    icon=\"plus\"\n                    color= {Colors.red500}\n                    size={wp('10%')}\n                    onPress={() => this.addPointTeam(2)}\n                  />\n                </View>\n              </View>\n          </View>\n        </View>\n      </View>\n    )\n  }\n}\n\n\nexport default Match;"]},"metadata":{},"sourceType":"module"}